$themecolour: blue;
$themecolourondark: bluedark;
$themecolouronlight: bluelight;

$black: black;
$near-black: #777;
$middle: #ccc;
$near-white: #f4f4f4;
$white: white;

@mixin borders { &, * { border-color: $middle; } }

@mixin darker { background-color: $near-black; }

@mixin dark {
  background-color: $black;
  color: $white;
  @include borders;

  [itemprop="image"], figure {
    opacity: .75;
    transition: opacity .5s ease-in-out;
    &:hover { opacity: 1 }
  }
}

@mixin lighter { background-color: $white; }

@mixin light {
  background-color: $near-white;
  color: $black;
  @include borders;
}

@mixin theme($mode) {
  [data-theme="#{$mode}"] {
    @content
  }
}

$modes: system, inverted;

@each $mode in $modes {
  @include theme($mode) {
    @if $mode == system { @include dark } @else if $mode == inverted { @include light };
    @media (prefers-color-scheme: light) {
      @if $mode == system { @include light } @else if $mode == inverted { @include dark };
    }
  }
}
